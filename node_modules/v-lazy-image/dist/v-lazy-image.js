var b=Object.defineProperty,y=Object.defineProperties;var h=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var l=(e,r,t)=>r in e?b(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,u=(e,r)=>{for(var t in r||(r={}))I.call(r,t)&&l(e,t,r[t]);if(d)for(var t of d(r))O.call(r,t)&&l(e,t,r[t]);return e},A=(e,r)=>y(e,h(r));(function(e,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VLazyImage=r(e.Vue))})(this,function(e){"use strict";var r={props:{src:{type:String,required:!0},srcPlaceholder:{type:String,default:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},srcset:{type:String},intersectionOptions:{type:Object,default:()=>({})},usePicture:{type:Boolean,default:!1}},inheritAttrs:!1,setup(t,{attrs:c,slots:f,emit:o}){const s=e.ref(null),n=e.reactive({observer:null,intersected:!1,loaded:!1}),v=e.computed(()=>n.intersected&&t.src?t.src:t.srcPlaceholder),g=e.computed(()=>n.intersected&&t.srcset?t.srcset:!1),a=()=>{s.value&&s.value.getAttribute("src")!==t.srcPlaceholder&&(n.loaded=!0,o("load",s.value))},m=()=>o("error",s.value);return e.onMounted(()=>{"IntersectionObserver"in window&&(n.observer=new IntersectionObserver(i=>{i[0].isIntersecting&&(n.intersected=!0,n.observer.disconnect(),o("intersect"))},t.intersectionOptions),n.observer.observe(s.value))}),e.onBeforeUnmount(()=>{"IntersectionObserver"in window&&n.observer&&n.observer.disconnect()}),()=>{const i=e.h("img",A(u({ref:s,src:v.value,srcset:g.value||null},c),{class:[c.class,"v-lazy-image",{"v-lazy-image-loaded":n.loaded}],onLoad:a,onError:m}));return t.usePicture?e.h("picture",{ref:s,onLoad:a},n.intersected?[f.default,i]:[i]):i}}};return r});
